---
- name: "Instalar GitHub CLI (gh)"
  become: yes
  block:
    - name: "Añadir repositorio de GitHub CLI"
      shell: |
        curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
        echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list
      args:
        creates: /etc/apt/sources.list.d/github-cli.list

    - name: "Instalar paquete gh"
      apt:
        name: gh
        state: present
        update_cache: yes

- name: "Instalar Google Cloud CLI (gcp)"
  become: yes
  block:
    - name: "Añadir repositorio de Google Cloud"
      shell: |
        curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo gpg --dearmor -o /usr/share/keyrings/cloud.google.gpg
        echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
      args:
        creates: /etc/apt/sources.list.d/google-cloud-sdk.list

    - name: "Instalar google-cloud-cli"
      apt:
        name: google-cloud-cli
        state: present
        update_cache: yes